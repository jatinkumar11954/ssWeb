<div id="fb-root">

</div>
<script async defer crossorigin="anonymous"
	src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v5.0&appId=826575227724107&autoLogAppEvents=1"></script>
<style>
	.row {
		margin: 0;
	}

	.mob-menu {
		display: none;
	}

	/* .container {

		margin-top: 3rem;
		margin-bottom: 3rem;
		padding: 2rem;
	} */

	.right {
		float: right;
	}

	.padding8 {
		padding: 4px 8px 4px 8px;
	}

	.form-control {
		height: calc(2.0em + 1.0rem + 2px);
		line-height: 1.3rem;
		font-size: 12px;
	}

	label {
		font-size: 15px;
	}

	.tabs-align ul {
		display: flex;
		justify-content: space-around;
	}

	.nav-pills li {
		float: left;
		width: 50%;
	}

	.nav li {
		position: relative;
		display: block;
	}

	.nav-pills li a.active {
		background-color: #fb9013;
		color: #fff;
	}

	.nav-pills li a {
		background-color: #e7e7e7;
	}

	.nav li a {
		position: relative;
		display: block;
		padding: 10px 15px;
		font-size: 17px;
		color: #000;
		text-align: center;
		font-weight: 600;
		text-transform: uppercase;
	}

	.ramcharan {
		background: url(https://old.happimobiles.com/wp-content/themes/happi-new/library/images/ramcharan.png);
		height: 595px;
		width: 100%;
		background-repeat: no-repeat;
		background-position: center;
		margin: 30px 0 0;
	}

	.tabs-align {

		background: url('/img/siginbg.jpg');
	}

	.container {
		width: 100% !important;
		margin: 0;
		max-width: 100% !important;
	}

	.auth-block {
		padding: 8rem 0;
	}

	.other-auth {
		display: grid;
		justify-content: end;

	}

	.other-auth a {
		padding: 1rem 0;
		font-size: 13px;
		text-decoration: none;
		color: #000;
	}
</style>

@{repository.loading = true}
<div class="container tabs-align">
	<div class="row m-0">
		<div class="col-md-6 ramcharan">

		</div>
		<div class="col-md-6 tab-r">
			<div class="auth-block">
				<ul class="nav nav-pills">
					<li class="active"><a data-toggle="tab" href="#home" class="active">Sign in</a></li>
					<li><a data-toggle="tab" href="#menu1">Sign up</a></li>

				</ul>

				<div class="tab-content">
					<div id="home" class="tab-pane fade in active show">
						<div class="content">
							<div class="contentbody">
								<div class="row m-0">

									<div class="col-md-12 col-xs-12">
										<form id="siginForm" class=" sigin-b" onsubmit="return false">
											<div class="row m-0">
												<!-- <h2>@(Sign in)</h2> -->
												<div class="col-md-12 m p-0">
													<div class="form-group">
														<label for="exampleInputEmail1">Email</label>
														<input type="text" class="form-control" id="semail"
															placeholder="Enter email" style="font-size: 14px;">

													</div>
												</div>
												<div class="col-md-12 m p-0">
													<div class="form-group">
														<label for="exampleInputEmail1">Password</label>
														<input type="password" class="form-control" id="spassword"
															placeholder="Enter Password">

													</div>
												</div>
											</div>
											<div class="alert alert-danger sigin-error" style="font-size: 14px;">

											</div>
											<!-- <a href="javascript:void(0)" class="fs12 exec link m" data-exec="switchpassword"><i class="fa fa-chevron-right"></i>@(I forgot my password)</a> -->
											<button type="submit" onclick="signInFromSubmit()" class="btn btn-primary"
												style="width: 100%; padding: 6px;font-weight: 900; font-size: 14px;">Sign in</button>
											<div class="row m-0">
												<div class="col-md-12 other-auth">

													<a href='javascript:void()' onclick="forgotView('forget')">Forgot
														your password?</a>
													<!-- <a href="/auth/fb/login"><img src="/img/facebook.png"></a> -->
												</div>
												
											</div>
											<!-- <div class="row m-0" style="display: flex;
											justify-content: center;
											padding-top: 2rem;">
													<div class="fb-login-button" data-width="" data-size="large"
												data-button-type="continue_with" data-auto-logout-link="false"
												data-use-continue-as="false"></div>
												</div>  -->
										</form>

										<form id="resetForm" class="forget-b" onsubmit="return false">
											<div class="row m-0">
												<!-- <h2>@(Sign in)</h2> -->
												<div class="col-md-12 m p-0">
													<div class="form-group">
														<label for="femail">Email</label>
														<input type="text" class="form-control" id="femail"
															placeholder="Enter email" style="font-size: 14px;">

													</div>
												</div>

											</div>

											<!-- <a href="javascript:void(0)" class="fs12 exec link m" data-exec="switchpassword"><i class="fa fa-chevron-right"></i>@(I forgot my password)</a> -->
											<button type="submit" onclick="resetPwdSubmit()" class="btn btn-primary"
												style="width: 100%; padding: 6px;font-weight: 900; font-size: 14px;">Reset</button>
											<div class="row m-0">
												<div class="col-md-12 other-auth">

													<a href='javascript:void()' onclick="forgotView('back')">Back to
														signin?</a>
													<!-- <a href="/auth/fb/login"><img src="/img/facebook.png"></a> -->
												</div>
												
											</div>

											
										</form>
									</div>


								</div>


							</div>


						</div>
					</div>
					<div id="menu1" class="tab-pane fade">
						<form id="sigupForm" onsubmit="return false">
							<div class=" content">
								<div class="row">
									<div class="col-md-12 col-xs-12">
										<div class="">

											<br />
											<div class="row">

												<div class="col-md-6 col-sm-12">
													<div class="form-group">
														<label for="exampleInputFirstname">First name</label>
														<input type="text" class="form-control" id="firstname"
															placeholder="Firstname" style="font-size: 14px;">
													</div>
												</div>
												<div class="col-md-6 col-sm-12">
													<div class="form-group">
														<label for="exampleInputLastname">Last name</label>
														<input type="text" class="form-control" id="lastname"
															placeholder="Lastname" style="font-size: 14px;">
													</div>
												</div>

												<!-- <div class="col-md-6 m  p-0">
																							<div data-jc="textbox" data-jc-path="account.signup.firstname" data-jc-config="required:true;maxlength:40">@(First name)</div>
																						</div>
																						<div class="col-md-6 m  p-0">
																							<div data-jc="textbox" data-jc-path="account.signup.lastname" data-jc-config="required:true;maxlength:40">@(Last name)</div>
																						</div> -->
											</div>
											<!-- <div class="caption2 nmb"><i class="fa fa-user"></i>@(Contact informations) -->
										</div>
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="exampleInputEmail1">Email</label>
													<input type="text" class="form-control" id="email"
														aria-describedby="emailHelp" placeholder="Enter email"
														style="font-size: 14px;">
													<!-- <small id="emailHelp" class="form-text text-muted"
														style="font-size: 12px;">We'll never share your email with
														anyone
														else.</small> -->
												</div>
											</div>
											<div class="col-md-6 col-sm-12 ">
												<div class="form-group">
													<label for="exampleInputPhonenumber">phone number</label>
													<input type="text" class="form-control" id="phone"
														data-minlength="10" maxlength="10" placeholder="Phonenumber"
														style="font-size: 14px;">
												</div>
											</div>
											<!-- <div class="col-md-6 m  p-0">
																							<div data-jc="textbox" data-jc-path="account.signup.email" data-jc-config="required:true;maxlength:120;type:email" data-jc-value="'@'">@(Email address)</div>
																							<div class="help">@(Will be used as a login name.)</div>
																						</div>
																						<div class="col-md-6 m  p-0">
																							<div data-jc="textbox" data-jc-path="account.signup.phone" data-jc-config="maxlength:30;type:phone;placeholder:@(International format)">@(Phone number)</div>
																						</div> -->
										</div>
									</div>
									<!-- <hr class="nmt nmb" /> -->
									<div class="contentbody col-md-12" style="padding: 0 20px;">
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="exampleInputEmail1">Password</label>
													<input type="password" class="form-control" id="password"
														placeholder="Enter Password" style="font-size: 14px;">

												</div>
												<!-- <div data-jc="textbox" data-jc-path="account.signup.password" data-jc-config="required:true;maxlength:30;type:password">@(Password)</div> -->
											</div>
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="exampleInputEmail1">Confirm Password</label>
													<input type="password" class="form-control" id="cpassword"
														placeholder="Enter Password" style="font-size: 14px;">

												</div>
												<!-- <div data-jc="textbox" data-jc-path="account.signup.passwordreply" data-jc-config="required:true;maxlength:30;type:password">@(Password again)</div> -->
											</div>
										</div>
									</div>
									<!-- <hr class="nmt nmb" /> -->
									<div class="contentbody col-md-12" style="padding: 0 20px 20px 20px;">
										<div class="form-group">
											<div class="form-check">
												<input class="form-check-input" type="checkbox" id="gridCheck" checked>
												<label class="form-check-label" for="gridCheck">
													&#8196; I agree with
													<a href="/terms-and-conditions/"> Terms and Conditions </a>
												</label>
											</div>
										</div>
										<!-- <div data-jc="checkbox" data-jc-path="account.signup.isterms" class="b red m">@(I agree with terms and conditions)</div>
																			<div data-jc="error" data-jc-path="account.signup.response"></div> -->

										<div class="alert alert-danger" id='signuperror' style="font-size: 14px;">
											<strong>Password!</strong> Not Matched
										</div>
										<button onclick="signUpFromSubmit()" class="btn btn-primary"
											style="width: 100%; padding: 6px;font-weight: 900; font-size: 14px;">Sign Up</button>
										<!-- <div class="row m-0" style="display: flex;
										justify-content: center;
										padding-top: 2rem;">

											<div class="fb-login-button" data-width="" data-size="large"
												data-button-type="continue_with" data-auto-logout-link="false"
												data-use-continue-as="false"></div>

										</div> -->

										<!-- <div data-jc="validation" data-jc-path="account.signup">
																				<button class="button b exec" data-exec="signupsubmit" name="submit" disabled="disabled">@(Sign
																					up)</button>
																			</div> -->
									</div>
								</div>

							</div>
						</form>
					</div>
				</div>

			</div>

		</div>
	</div>
</div>


<!-- <div class="row m-0">
		<div class="col-lg-5 col-md-4">
			
		</div>
		<div class="col-lg-7 col-md-8">
			
		</div>
	</div> -->

</div>

<script>
	$('#signuperror').hide();
	$('.sigin-error').hide();
	$('.forget-b').hide();
	$('#siginForm').bind("submit", function () {
		signInFromSubmit()
	});
	$('#sigupForm').bind("submit", function () {
		signUpFromSubmit()
	});


	$(document).ready(function () {
		// $('#phone').keyup(function () {//use mouseout
		// 	if ($(this).val().indexOf('9') == 0) {
		// 		$(this).val($(this).val());
		// 		console.log('frst');

		// 	} else {
		// 		$(this).val("91" + $(this).val());
		// 		console.log('dd', $(this).val());

		// 	}
		// });
	});

	function forgotView(params) {
		if (params == 'forget') {
			$('.sigin-b').hide();
			$('.forget-b').show();
		} else {
			$('.sigin-b').show();
			$('.forget-b').hide();
		}

	}

	function resetPwdSubmit() {

		var resetObj = {
			email: $('#femail').val()
		};
		console.log(resetObj);

		$.ajax('/api/account/password/', {
			type: 'POST',
			data: JSON.stringify(resetObj),
			dataType: 'json', // type of response data
			contentType: 'application/json',
			timeout: 500, // timeout milliseconds
			success: function (response, status, xhr) { // success callback function
				SETTER('loading', 'hide', 1000);
				console.log(response);
				$(".error").remove();
				for (let i = 0; i < response.length; i++) {
					const element = response[i];
					$('#femail').after(`<span class="error">${element.error}</span>`);


				}

				if (response.success) {
					console.log('mEssegs');
					Swal.fire({
						position: 'center',
						icon: 'success',
						title: name + '@(We sent you the email with instructions for resetting password.)',
						showConfirmButton: true,

					}).then((result) => {
						if (result.value) {
							window.location.href = '/account';
						} else {
							window.location.href = '/account';
						}
					}

					);

				}
			},
			error: function (jqXhr, textStatus, errorMessage) { // error callback 
				console.log("errror");

			}
		});
	}

	function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
		console.log('statusChangeCallback');
		console.log(response);                   // The current login status of the person.
		if (response.status === 'connected') {   // Logged into your webpage and Facebook.
			testAPI();
		} else {                                 // Not logged into your webpage or we are unable to tell.
			document.getElementById('status').innerHTML = 'Please log ' +
				'into this webpage.';
		}
	}


	function checkLoginState() {               // Called when a person is finished with the Login Button.
		FB.getLoginStatus(function (response) {   // See the onlogin handler
			statusChangeCallback(response);
		});
	}


	window.fbAsyncInit = function () {
		FB.init({
			appId: '{app-id}',
			cookie: true,                     // Enable cookies to allow the server to access the session.
			xfbml: true,                     // Parse social plugins on this webpage.
			version: '{api-version}'           // Use this Graph API version for this call.
		});


		FB.getLoginStatus(function (response) {   // Called after the JS SDK has been initialized.
			statusChangeCallback(response);        // Returns the login status.
		});
	};


	(function (d, s, id) {                      // Load the SDK asynchronously
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "https://connect.facebook.net/en_US/sdk.js";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));


	function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
		console.log('Welcome!  Fetching your information.... ');
		FB.api('/me', function (response) {
			console.log('Successful login for: ' + response.name);
			document.getElementById('status').innerHTML =
				'Thanks for logging in, ' + response.name + '!';
		});
	}

	function signUpFromSubmit() {

		if ($('#password').val() == $('#cpassword').val()) {
			$('#signuperror').hide();

			var signUpObj = {
				firstname: $('#firstname').val(),
				lastname: $('#lastname').val(),
				email: $('#email').val(),
				phone: $('#phone').val(),
				isterms: $("#gridCheck").is(':checked'),
				gender: "M",
				password: $('#password').val(),
				passwordreply: $('#password').val(),
			};



			$.ajax('/api/account/create/', {
				type: 'POST',
				data: JSON.stringify(signUpObj),
				dataType: 'json', // type of response data
				contentType: 'application/json',
				timeout: 500, // timeout milliseconds
				success: function (response, status, xhr) { // success callback function


					SETTER('loading', 'hide', 1000);
					console.log(response);
					// location.reload(true);
					$(".error").remove();
					for (let i = 0; i < response.length; i++) {
						const element = response[i];
						$('#' + element.name).after(`<span class="error">${element.error}</span>`);
						if (response[i].name == "error-users-email") {
							console.log('email error');

							$('#email').after(`<span class="error">${element.error}</span>`);
						}
					}

					if (response.success) {
						if (localStorage.getItem('userNotloggedIn')) {
							console.log('LOOG in');

							window.location.href = localStorage.getItem('userNotloggedIn');
							localStorage.removeItem('userNotloggedIn');
							// location.reload(true);
						} else {
							window.location.href = '/';
						}

					}

					else {
						RESET('account.sigin.*', true);
						SET('account.sigin.response', response);
					}
				},
				error: function (jqXhr, textStatus, errorMessage) { // error callback 
					console.log("errror");

				}
			});
		} else {
			$('#signuperror').show();
		}



	}

	function signInFromSubmit() {
		var signInObj = {
			email: $('#semail').val(),
			password: $('#spassword').val(),
		};
		console.log(signInObj);

		$.ajax('/api/account/login/', {
			type: 'POST',
			data: JSON.stringify(signInObj),
			dataType: 'json', // type of response data
			contentType: 'application/json',
			timeout: 500, // timeout milliseconds
			success: function (response, status, xhr) { // success callback function

				console.log("Login Data", response);
				SETTER('loading', 'hide', 1000);
				$(".error").remove();
				for (let i = 0; i < response.length; i++) {
					const element = response[i];
					$('#' + element.name).after(`<span class="error">${element.error}</span>`);
				}
				if (response.success) {
					console.log('LLLLL', localStorage.getItem('userNotloggedIn'));


					$('.sigin-error').hide();
					if (localStorage.getItem('userNotloggedIn')) {
						console.log('LOOG in');

						window.location.href = localStorage.getItem('userNotloggedIn');
						localStorage.removeItem('userNotloggedIn');
						// location.reload(true);
					} else {
						window.location.href = '/';
					}


				}
				else {
					$('.sigin-error').show();
					$('.sigin-error').html(response[0].error);
					RESET('account.sigin.*', true);
					SET('account.sigin.response', response);
				}
			},
			error: function (jqXhr, textStatus, errorMessage) { // error callback 
				console.log("errror");

			}
		});

	}

	var account = {};

	account.type = 'signin';

	SETTER(true, 'loading', 'hide', 500);

	function signupsubmit() {

		if (BLOCKED('account', 3000))
			return;

		SETTER('loading', 'show');
		AJAX('POST /api/account/create/', account.signup, function (response) {

			SETTER('loading', 'hide', 1000);

			if (response.success)
				location.reload(true);
			else {
				RESET('account.signup.*', true);
				SET('account.signup.response', response);
			}
		});
	}

	function signinsubmit() {

		if (BLOCKED('account', 3000))
			return;

		SETTER('loading', 'show');
		AJAX('POST /api/account/login/', account.signin, function (response) {

			SETTER('loading', 'hide', 1000);

			if (response.success) {

				location.reload(true);

			}
			else {
				return;
				RESET('account.sigin.*', true);
				SET('account.sigin.response', response);
			} console.log('singin');
		});
	}

	function passwordsubmit() {


		if (BLOCKED('account', 3000))
			return;

		SETTER('loading', 'show');
		AJAX('POST /api/account/password/', account.password, function (response) {
			SETTER('loading', 'hide', 1000);
			console.log(response);

			if (response.success)
				SETTER('message', 'success', '@(We sent you the email with instructions for resetting password.)');
			else {
				RESET('account.password.*', true);
				SET('account.password.response', response);
			}
		});
	}

	function switchpassword() {
		SET('account.type', account.type === 'password' ? 'signin' : 'password');
	}

</script>